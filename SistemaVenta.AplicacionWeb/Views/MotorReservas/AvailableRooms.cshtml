@{
    ViewData["Title"] = "Rooms";
    // ViewData["Title2"] = @ViewBag.establishmentCheckOutParam;
    Layout = "~/Views/Shared/Public/_LayoutRooms.cshtml";
}

@section Styles{
    <!-- ============================================================
    =ESTILOS PARA ESTA PAGINA
    ===============================================================-->
    <link href="~/vendor/select2/select2.min.css" rel="stylesheet">
    <link href="~/vendor/daterangepicker-master/daterangepicker.css" rel="stylesheet" />

    <style>
        .card-room-details {
            border: 1px solid #dadadd;
            border-radius: 6px;
            box-shadow: none;
            background-color: #fff;
            height: 260px;
        }

        figure {
            margin: 0;
            width: 100px;
            height: 100px;
        }

        .card-room-title {
            font-weight: 500;
            font-size: 0.75rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            letter-spacing: .07em;
            text-transform: uppercase;
            color: #1264a3;
            font-size: 0.875rem;
            line-height: 1.25rem;
        }

        .grid-title {
            font-weight: 700;
            font-size: 1.875rem;
            font-family: "Montserrat",Arial,sans-serif;
            line-height: 2.75rem;
            margin-bottom: 8px;
            color: #252339;
        }

        .grid-subtitle {
            font-weight: 400;
            font-size: 0.75rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            color: #6f6e77;
        }

        .nights-count {
            font-weight: 400;
            font-size: 0.75rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            margin-left: 24px;
            color: #6f6e77;
        }

        .grid-img {
            aspect-ratio: 4/3;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            overflow: hidden;
        }

        img {
            border-radius: 6px;
        }

        .rooms-parent {
            overflow: hidden;
            background-color: #fff;
            border: 1px solid #dadadd;
            border-radius: 6px;
            will-change: scroll-position;
            margin: 28px 0px;
        }

        .rooms-child {
            flex-flow: row wrap;
            max-width: initial;
            padding: 24px;
        }

        .room-card__title {
            font-weight: 600;
            font-size: 1.30rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.75rem;
        }

        .room-info__capacity-size {
            font-weight: 400;
            font-size: 0.75rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            margin: 12px 0;
        }

        .room-info__body {
            display: -webkit-box;
            flex-grow: 1;
            overflow: hidden;
            white-space: wrap;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }

        hr {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .num-available-rooms {
            -webkit-text-size-adjust: 100%;
            color: #252339;
            box-sizing: inherit;
            margin: 0;
            padding: 0;
            font-weight: 500;
            font-size: 0.75rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            letter-spacing: .07em;
            text-transform: uppercase;
        }

        .room-card__details {
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            color: #252339;
            font-size: 1rem;
            list-style: none;
            font-family: "roboto";
            box-sizing: inherit;
            position: relative;
            margin-bottom: 28px;
        }

        ul {
            line-height: 1.15;
            -webkit-text-size-adjust: 100%;
            color: #252339;
            font-size: 1rem;
            font-family: "roboto";
            box-sizing: inherit;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .room-info__asset-item--capacity-size {
            -webkit-text-size-adjust: 100%;
            color: #252339;
            box-sizing: inherit;
            padding: 0;
            list-style: none;
            font-weight: 400;
            font-size: 0.90rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            margin: 8px 0;
        }

        .room-asset__label {
            font-weight: 400;
            font-size: 1rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.5rem;
            display: -webkit-box;
            flex-grow: 1;
            overflow: hidden;
            white-space: wrap;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            font-weight: 400;
            font-size: 1rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.55rem;
        }

        .first-row-details {
            padding-bottom: 0.12rem !important;
        }

        @@ media (min-width: 48rem) {
            .room-info__asset-item--capacity-size {
                margin: 8px 0;
            }
        }

        .room__tab-panel {
            margin: -8px 24px 4px 24px;
        }

        .choose-your-rate--no-package {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .choose-your-rate {
            font-weight: 400;
            font-size: 1rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.5rem;
        }

        .choose-your-rate__delimiter {
            flex-grow: 2;
            height: 1px;
            background-color: #cfd5d7;
        }

        .choose-your-rate__text {
            padding: 0 16px;
            color: #252339;
            font-weight: 400;
            font-size: 0.625rem;
            text-align: center;
            text-transform: uppercase;
        }

        .offer {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 16px;
            justify-content: space-between;
            color: #3e3d48;
            font-size: 0.875rem;
            background-color: #fff;
            border-radius: 6px;
        }

        .offer:not(.offer--selected) {
            background-color: #f4f4f5;
        }

        @@media (min-width: 48rem) {
            .room-card--in-rates .room-card__footer {
                padding-top: 16px;
            }
        }

        .room-card__footer {
            display: flex;
            flex-basis: 100%;
            align-items: center;
            justify-content: flex-end;
        }

        .room-info__link-modal--in-footer {
            margin-right: 24px;
        }

        .room-info__link-modal {
            font-weight: 400;
            font-size: 0.875rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.25rem;
            text-decoration: underline;
            margin-top: 8px;
            padding: 0;
            color: #1264a3;
            line-height: 20px;
            text-decoration: underline;
            background-color: rgba(0,0,0,0);
            border: none;
            cursor: pointer;
        }

        @@media (min-width: 48rem) {
            .room-info__button {
                max-width: 25%;
            }
        }

        .room-info__button {
            font-size: 0.875rem;
        }

        .btn-site {
            position: relative;
            display: block;
            width: 100%;
            padding: 11px;
            font-weight: 400;
            font-size: 1rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1.125rem;
            background-color: rgba(0,0,0,0);
            border: none;
        }

        .btn--primary {
            color: #fff;
            background-color: #1e1852;
            border-radius: 60px;
        }

        .price-section {
            background-color: #f4f4f5;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .booking-price {
            font-weight: 700;
            font-size: 1.5rem;
            line-height: 2rem;
            font-family: "Roboto",Arial,sans-serif;
            white-space: nowrap;
        }

        .rate-details__label {
            font-weight: 400;
            font-size: 0.95rem;
            font-family: "Roboto",Arial,sans-serif;
            line-height: 1rem;
            color: #6f6e77;
        }

        .pricing-details__excluded {
            display: flex;
            flex-direction: column;
            font-size: 0.75rem;
            text-align: right;
        }

        .offer__conditions {
            padding: 0;
            color: #1264a3;
            font: inherit;
            font-size: 0.775rem;
            font-family: "Roboto",Arial,sans-serif;
            white-space: nowrap;
            text-decoration: underline;
            background: none;
            border: none;
        }

    </style>
}

    <div class="row pt-5 pb-2 px-5">
        <div class="col-md-9">
            <div class="container-fluid">
                <div class="row py-1">
                    <div class="col-md-12 text-center">
                        <h2 class="grid-title">Elija su servicio</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 text-center grid-subtitle">
                    Habitaciones para @ViewBag.selectedEstablishment.TotalPeople @ViewBag.selectedEstablishment.TxtTotalPeople y @ViewBag.selectedEstablishment.TotalDaysBooking @ViewBag.selectedEstablishment.TextTotalDays
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-md-12 grid-subtitle">
                        <p class="num-available-rooms">@ViewBag.numAvailableRooms habitaciones para su búsqueda</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">

                    @foreach (SistemaVenta.BLL.Implementacion.RoomsAndCategoryObject room in Model)
                    {
                            <div class="rooms-parent">
                                <div class="rooms-child">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <figure class="grid-img">
                                                <img 
                                                    src="@room.RoomImages?.FirstOrDefault()?.UrlImage" 
                                                    class="img-fluid" 
                                                    data-toggle="modal"
                                                    data-target="#imageModal2" data-roomid="@room.IdRoom">
                                            </figure>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-12 text-capitalize">
                                                <h2 class="room-card__title">@room.Title</h2>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="room-card__details">
                                                        <ul>
                                                            <li class="room-info__asset-item room-info__asset-item--capacity-size">@room.Capacity personas
                                                                <span>&nbsp; · &nbsp;</span>
                                                                @room.Size m²
                                                            </li>
                                                        <li class="room-asset__label room-asset__label--body-02"><i class="fas fa-bed fa-lg_ pr-1"></i>@room.CategoryName</li>
                                                            <li class="room-asset__label room-asset__label--body-02">Habitación @room.Number</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 float-right">
                                                    <div class="row">
                                                        <div class="col-md-12 price-section py-4 px-4">
                                                        <span class="float-right rate-details__label pb-2">Precio</span>
                                                            <span class="float-right booking-price">$@room.Price</span>
                                                            <span class="pricing-details__excluded">Impuestos no incluidos 19%</span>
                                                            <button type="button" class="offer__conditions float-right">
                                                                Condiciones del precio
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row pt-4">
                                                <div class="col-md-12 float-right">
                                                    <div class="room-card__footer">
                                                        <button 
                                                            class="room-info__link-modal room-info__link-modal--in-footer" 
                                                            data-toggle="modal"
                                                            data-target="#imageModal2" data-roomid="@room.IdRoom">
                                                            Ver detalles de la habitación
                                                        </button>

                                                        <button 
                                                            data-idroom="@room.IdRoom"
                                                            data-idestabl="@room.IdEstablishment"
                                                            data-checkin="@ViewBag.selectedEstablishment.CheckIn"
                                                            data-checkout="@ViewBag.selectedEstablishment.CheckOut"
                                                            data-numrooms="@ViewBag.selectedEstablishment.NumRoom"
                                                            data-numadults="@ViewBag.selectedEstablishment.NumAdult"
                                                            data-numchildren="@ViewBag.selectedEstablishment.NumChildren"
                                                            aria-expanded="false"
                                                            type="button"
                                                            class="dynamic-button-room btn-site btn--primary room-info__button">
                                                            Seleccionar
                                                        </button>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>    
                        }
                
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 card-room-details pl-3_">

            <div class="row">
                <div class="col-md-9 pt-4 pb-2">
                    <div class="row">
                        <div class="col-md-12">
                        <span class="font-weight-bold card-room-title">@ViewBag.selectedEstablishment.EstablishmentName</span>
                        </div>
                    </div>
                    <div class="row first-row-details">
                        <div class="col-md-12 pt-2">
                        <span><i class="far fa-clock fa-lg_ pr-1"></i>Check-in: @ViewBag.selectedEstablishment.CheckInTime</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                        <span><i class="far fa-clock fa-lg_ pr-1"></i>Check-out: @ViewBag.selectedEstablishment.CheckOutTime</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <figure class="float-right">
                    <img src="@ViewBag.selectedEstablishment.EstablishmentUrlImg" class="img-fluid" alt="Responsive image">
                    </figure>
                </div>
            </div>
            <hr class="pb-2" />
            <div class="row pt2">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            <i class="far fa-calendar fa-lg_ pr-1"></i> <span>@ViewBag.selectedEstablishment.CheckInFormated</span> <i class="fas fa-arrow-right px-2"></i> <span> @ViewBag.selectedEstablishment.CheckOutFormated</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                        <p class="nights-count">@ViewBag.selectedEstablishment.TotalDaysBooking @ViewBag.selectedEstablishment.TextTotalDays</p>
                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row pb-2">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            <span>
                                <i class="far fa-user fa-lg_ pr-1"></i>@ViewBag.selectedEstablishment.TotalPeople @ViewBag.selectedEstablishment.TxtTotalPeople
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="carouselModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="carouselModalLabel">Galería de imágenes</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="https://source.unsplash.com/random/800x600" alt="Slide 1">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="https://source.unsplash.com/random/800x600" alt="Slide 2">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="https://source.unsplash.com/random/800x600" alt="Slide 3">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <h4 class="pt-2">Título del modal</h4>
                    <div class="row">
                        <div class="col-md-7">
                            <p class="text-justify">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed condimentum ultricies augue ac
                                efficitur.
                            </p>
                        </div>
                        <div class="col-md-5">
                            <p>Capacidad: xxx personas</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="imageModal2" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">Imágenes de la Habitación</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="imageCarousel" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            <!-- Las imágenes se cargarán aquí -->
                        </div>
                        <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Anterior</span>
                        </a>
                        <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Siguiente</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @section Scripts{
        <!-- =============================================================
            SCRIPTS PARA ESTA PAGINA
        =============================================================== -->
        <script src="~/vendor/daterangepicker-master/moment.min.js"></script>
        <script src="~/vendor/daterangepicker-master/daterangepicker.js"></script>

        <script src="~/vendor/datatables/jquery.dataTables.min.js"></script>
        <script src="~/vendor/datatables/dataTables.bootstrap4.min.js"></script>

        <script src="~/vendor/datatables/extensiones/js/dataTables.responsive.min.js"></script>
        <script src="~/vendor/datatables/extensiones/js/dataTables.buttons.min.js"></script>
        <script src="~/vendor/datatables/extensiones/js/jszip.min.js"></script>
        <script src="~/vendor/datatables/extensiones/js/buttons.html5.min.js"></script>
        <script src="~/vendor/datatables/extensiones/js/buttons.print.min.js"></script>

        <script src="~/js/vistas/MotorReservas.js"></script>
        <script src="~/vendor/select2/select2.min.js"></script>
        <script src="~/vendor/select2/es.min.js"></script>
    }
